```
class Solution:
    def deleteDuplication(self, pHead):
        p, previous = pHead, pHead
        d = {}
        while p:
            val = p.val
            if val not in d:
                d[val] = 1
                previous, p = p, p.next
            else:
                d[val] += 1
                p = p.next
                previous.next = p
        node = ListNode(0)
        node.next = pHead
        p, previous = node.next, node
        while p:
            if d[p.val] == 1:
                previous, p = p, p.next
            else:
                p = p.next
                previous.next = p
        return node.next
```

```
class Solution:
    def deleteDuplication(self, pHead):
        node = ListNode(0)
        node.next = pHead
        p, previous = pHead, node
        while p:
            if p.next and p.next.val == p.val:
                while p.next and p.next.val == p.val:
                    p = p.next
                p = p.next
                previous.next = p
            else:
                previous = p
                p = p.next
        return node.next
```
